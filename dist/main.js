(()=>{"use strict";const t=document.querySelectorAll(".slider__img"),e=document.querySelectorAll(".slider__dot");let n=0;function s(){t.forEach((t=>{t.style.display="none"})),n++,n>t.length&&(n=1),e.forEach((t=>{t.className=t.className.replace(" active-dot","")})),t[n-1].style.display="block",e[n-1].className+=" active-dot",setTimeout(s,5e3)}const o=document.querySelector(".categories__list"),c=document.querySelectorAll(".categories__list-item");const a=document.querySelector(".book-cards"),i=[];function r(t){let e="";t.items.forEach((t=>{const n=`\n        <div class="book-cards__card">\n            <img src="${t.volumeInfo.imageLinks.thumbnail?t.volumeInfo.imageLinks.thumbnail:"/src/img/cards-img/imagePlaceholder.png"}" class="book-cards__img"/>\n            <div class="book-cards__text">\n                <p class="book-cards__author">${t.volumeInfo.authors?t.volumeInfo.authors:"author not specified"}</p>\n                <p class="book-cards__title">${t.volumeInfo.title}</p>\n                <div class="rating">\n                    <div class="rating__body">\n                        <div class="rating__active" style="width: ${t.volumeInfo.averageRating/.05}%"></div>  \n                        <p class="rating__review">${t.volumeInfo.ratingsCount?t.volumeInfo.ratingsCount:0} review</p>    \n                    </div>\n                </div>\n                <p class="book-cards__description">${t.volumeInfo.description}</p>\n                <p class="book-cards__price">${t.saleInfo.retailPrice?t.saleInfo.retailPrice.amount+" "+t.saleInfo.retailPrice.currencyCode:"Not for sale"}</p>\n                <button class="${t.saleInfo.retailPrice?"book-cards__btn":"disabled-btn"}">buy now</button>\n            </div>\n        </div>`;e+=n})),a.innerHTML=e,function(t){const e=document.querySelectorAll(".book-cards__btn"),n=document.querySelector(".cart-counter");let s;console.log(t),e.forEach((e=>{e.addEventListener("click",(o=>{s=function(t,e){let n;return n=t.items.find((t=>{if(t.volumeInfo.title===e.target.parentNode.querySelector(".book-cards__title").textContent)return t})),n.id}(t,o),e.classList.contains("book-cards__btn")?(!function(t){i.includes(t)||i.push(t)}(s),e.classList.replace("book-cards__btn","in-cart-btn"),e.innerText="in the cart"):e.classList.contains("in-cart-btn")&&(!function(t){i.includes(t)&&i.splice(i.indexOf(t),1)}(s),e.classList.replace("in-cart-btn","book-cards__btn"),e.innerText="buy now"),n.classList.contains("cart-counter-visible")||n.classList.add("cart-counter-visible"),n.innerText=i.length,"0"===n.textContent&&n.classList.remove("cart-counter-visible")})),i.includes(function(t,e){let n=t.items.find((t=>{if(t.volumeInfo.title===e.parentElement.querySelector(".book-cards__title").textContent)return t}));return n.id}(t,e))&&(e.classList.replace("book-cards__btn","in-cart-btn"),e.innerText="in the cart")}))}(t)}function l(t){fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${t}"&key=AIzaSyCQbSqaHFYuQo8gpB5hi-3wu4jOa22C_MY&printType=books&startIndex=0&maxResults=6&orderBy=newest&langRestrict=en`).then((t=>t.json())).then((t=>{r(t)})).catch((t=>t))}window.addEventListener("DOMContentLoaded",(()=>{s(),e.forEach(((n,s)=>{n.addEventListener("click",(n=>{e.forEach((t=>{t.classList.contains("active-dot")&&t.classList.remove("active-dot")})),n.target.classList.add("active-dot"),t.forEach((t=>{t.style.display="none"})),t[s].style.display="block"}))})),c[0].classList.add("active-category"),o.addEventListener("click",(t=>{t.target.classList.contains("categories__list-item")&&(c.forEach((t=>{t.classList.contains("active-category")&&t.classList.remove("active-category")})),t.target.classList.add("active-category"))})),l(c[0].outerText),o.addEventListener("click",(t=>{l(t.target.outerText)}))}))})();